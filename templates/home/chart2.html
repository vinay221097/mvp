<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Multi-Line Chart with Two Y-Axes</title>
    <!-- amCharts 4 core JS -->
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <!-- amCharts 4 charts JS -->
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <!-- amCharts 4 themes -->
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
    <style>
        #chartdiv {
            width: 100%;
            height: 300px;
        }
    </style>
        <script>
        am4core.ready(function() {
            // Themes begin
            am4core.useTheme(am4themes_animated);
            // Themes end
            
            // Create chart
            var chart = am4core.create("chartdiv", am4charts.XYChart);
            
            // Add data
            var tdata={{chart_data |safe}};
            chart.data = tdata;
            




            // Create axes
            var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
            dateAxis.renderer.minGridDistance = 30;
            dateAxis.baseInterval = {
                "timeUnit": "day",
                "count": 1
            };
            
            dateAxis.renderer.labels.template.fill = am4core.color("#5a5a5a"); // Axis label color
            dateAxis.dateFormats.setKey("day", "MMM dd, yyyy");
            dateAxis.periodChangeDateFormats.setKey("day", "MMM dd, yyyy");
            dateAxis.renderer.labels.template.rotation = 325;
            dateAxis.renderer.labels.template.horizontalCenter = "right";
            dateAxis.renderer.labels.template.verticalCenter = "middle";
            dateAxis.renderer.labels.template.fontSize = 10; // Adjust font size as needed





            
            // Create two value axes
            var inversionAxis = chart.yAxes.push(new am4charts.ValueAxis());
            inversionAxis.title.text = "Inversion Shaft";
            inversionAxis.renderer.line.strokeOpacity = 1;
            inversionAxis.renderer.line.strokeWidth = 2;
            inversionAxis.renderer.line.stroke = chart.colors.getIndex(0); // First color
            inversionAxis.renderer.labels.template.fill = chart.colors.getIndex(0);
            inversionAxis.renderer.grid.template.strokeOpacity = 0.1;
            inversionAxis.renderer.labels.template.fontSize = 12; // Adjust font size as needed
            inversionAxis.title.text = "";

            var stopAxis = chart.yAxes.push(new am4charts.ValueAxis());
            stopAxis.title.text = "Stop Shaft";
            stopAxis.renderer.opposite = true;
            stopAxis.renderer.line.strokeOpacity = 1;
            stopAxis.renderer.line.strokeWidth = 2;
            stopAxis.renderer.line.stroke = chart.colors.getIndex(2); // Third color
            stopAxis.renderer.labels.template.fill = chart.colors.getIndex(2);
            stopAxis.renderer.grid.template.strokeOpacity = 0.1;
            stopAxis.renderer.labels.template.fontSize = 12; // Adjust font size as needed
            stopAxis.title.text = "";
            
            // Create series function
            function createSeries(field, name, axis, color) {
                var series = chart.series.push(new am4charts.LineSeries());
                series.dataFields.valueY = field;
                series.dataFields.dateX = "Date";
                series.name = name;
                series.yAxis = axis;
                series.stroke = color;
                series.strokeWidth = 3;
                series.tooltipText = "{name}: [bold]{valueY}[/]";
                
                var bullet = series.bullets.push(new am4charts.Bullet());
                var circle = bullet.createChild(am4core.Circle);
                circle.radius = 2;
                circle.fill = color;
                circle.strokeWidth = 1;
                
                return series;
            }
            

            // Add series
            createSeries("InversionShaft1", "Inversion Shaft 1", inversionAxis, am4core.color("#6782B4")); // A blue color
            createSeries("InversionShaft2", "Inversion Shaft 2", inversionAxis, am4core.color("#67B7DC")); // A lighter blue color
            createSeries("Stop_Shaft1", "Stop Shaft 1", stopAxis, am4core.color("#A367B4")); // A purple color
            createSeries("Stop_Shaft2", "Stop Shaft 2", stopAxis, am4core.color("#DC67CE")); // A pink color

            // Add scrollbar
            chart.scrollbarX = new am4core.Scrollbar();
            chart.scrollbarX.background.fillOpacity = 0.1;
            chart.scrollbarX.minHeight = 5; // Reducing height, adjust as needed
            // Add cursor
            chart.cursor = new am4charts.XYCursor();

            
            // Add legend
            chart.legend = new am4charts.Legend();
            chart.legend.align = "bottom";
            chart.legend.valign = "middle";


        }); // end am4core.ready()
    </script>
</head>
<body>
    <div id="chartdiv"></div>

</body>
</html>
